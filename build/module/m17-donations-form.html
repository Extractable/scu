<!doctype html>
<html>
    <head>
        <!-- Global Head -->
        <meta charset="utf-8">

<!-- Always force latest IE rendering engine or request Chrome Frame -->
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="/stylesheets/styles.css" rel="stylesheet" type="text/css" />

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<script src="/javascripts/vendor/modernizr-custom.js"></script>
<script src="/javascripts/vendor/jquery.maskedinput.min.js"></script>
<script src="/javascripts/vendor/iframeResizer.min.js"></script>
<script src="/javascripts/vendor/jquery.scrollbar.min.js"></script>
<script src="/javascripts/vendor/jquery.matchHeight-min.js"></script>

<script src="/javascripts/main.js"></script>

<!-- Cludo Search CSS -->
<link href="//customer.cludo.com/css/templates/v2.1/essentials/cludo-search.min.css" type="text/css" rel="stylesheet">

<!-- Bootstrap Datepicker -->
<script src="/javascripts/vendor/datepicker.min.js" type="text/javascript"></script>
<link href="/stylesheets/vendor/datepicker.min.css" rel="stylesheet" type="text/css" />

<!-- Use title if it's in the page YAML frontmatter -->
<title>SchoolsFirst - M17 Donations Form</title>

    </head>

    <body>

        <!-- Site Layouts / Modules -->
        <!-- M8: Content -->
<section>
    <div class="container">
        <div class="row">
            <div class="col-12 col-lg-8">
                <div class="m17">
    <h2>
        REQUEST A DONATION
        <div class="div"></div>
        <div class="required">Fields marked with an asterisk
            <span>*</span>
            are required</div>
    </h2>
    <hr>

    <div class="form">
        <h3>Details of Application</h3>
        <hr>

        <form id="donationForm" action="" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <div class="form-element">
                    <label for="contact_name">Contact Name<span>*</span></label>
                    <input type="text" id="contact_name" autocomplete="off" aria-required="true" class="js-validate">
                    <div class="form-error" id="contact_name-error" tabindex="-1">
                        Contact name is required
                    </div>
                </div>
                <div class="form-element">
                    <label for="contact_org">Contact Organization<span>*</span></label>
                    <input type="text" id="contact_org" autocomplete="off" aria-required="true" class="js-validate">
                    <div class="form-error" id="contact_org" tabindex="-1">
                        Contact organization is required
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="form-element">
                    <label for="org_purpose">Purpose of Organization<span>*</span></label>
                    <textarea id="org_purpose" autocomplete="off" aria-required="true" class="js-validate"></textarea>
                    <div class="form-error" id="org_purpose-error" tabindex="-1">
                        Please enter a purpose
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="form-element">
                    <label for="org_address">Address<span>*</span></label>
                    <input type="text" id="org_address" autocomplete="off" aria-required="true" class="js-validate">
                    <div class="form-error" id="org_address-error" tabindex="-1">
                        Organization address is required
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="form-element">
                    <label for="state">State<span>*</span></label>
                    <select id="state" aria-required="true" class="js-validate">
                        <option selected="" value="">Please Select</option>
                        <option value="AL">AL</option>
                    	<option value="AK">AK</option>
                    	<option value="AR">AR</option>
                    	<option value="AZ">AZ</option>
                    	<option value="CA">CA</option>
                    	<option value="CO">CO</option>
                    	<option value="CT">CT</option>
                    	<option value="DC">DC</option>
                    	<option value="DE">DE</option>
                    	<option value="FL">FL</option>
                    	<option value="GA">GA</option>
                    	<option value="HI">HI</option>
                    	<option value="IA">IA</option>
                    	<option value="ID">ID</option>
                    	<option value="IL">IL</option>
                    	<option value="IN">IN</option>
                    	<option value="KS">KS</option>
                    	<option value="KY">KY</option>
                    	<option value="LA">LA</option>
                    	<option value="MA">MA</option>
                    	<option value="MD">MD</option>
                    	<option value="ME">ME</option>
                    	<option value="MI">MI</option>
                    	<option value="MN">MN</option>
                    	<option value="MO">MO</option>
                    	<option value="MS">MS</option>
                    	<option value="MT">MT</option>
                    	<option value="NC">NC</option>
                    	<option value="NE">NE</option>
                    	<option value="NH">NH</option>
                    	<option value="NJ">NJ</option>
                    	<option value="NM">NM</option>
                    	<option value="NV">NV</option>
                    	<option value="NY">NY</option>
                    	<option value="ND">ND</option>
                    	<option value="OH">OH</option>
                    	<option value="OK">OK</option>
                    	<option value="OR">OR</option>
                    	<option value="PA">PA</option>
                    	<option value="RI">RI</option>
                    	<option value="SC">SC</option>
                    	<option value="SD">SD</option>
                    	<option value="TN">TN</option>
                    	<option value="TX">TX</option>
                    	<option value="UT">UT</option>
                    	<option value="VT">VT</option>
                    	<option value="VA">VA</option>
                    	<option value="WA">WA</option>
                    	<option value="WI">WI</option>
                    	<option value="WV">WV</option>
                    	<option value="WY">WY</option>
                    </select>
                    <div class="form-error" id="state-error" tabindex="-1">
                        State is required
                    </div>
                </div>
                <div class="form-element">
                    <label for="city"">City<span>*</span></label>
                    <input type="text" id="city" autocomplete="true" aria-required="true" class="js-validate">
                    <div class="form-error" id="city-error" tabindex="" -1"="-1"">
                        City is required
                    </div>
                </div>
                <div class="form-element">
                    <label for="zip"">Zip<span>*</span></label>
                    <input type="text" id="zip" autocomplete="true" aria-required="true" class="js-validate js-zip-mask">
                    <div class="form-error" id="zip-error" tabindex="" -1"="-1"">
                        Zip code is required
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="form-element">
                    <label for="org_phone">Contact Phone Number<span>*</span></label>
                    <input type="text" id="org_phone" autocomplete="off" aria-required="true" class="js-validate js-phone-mask">
                    <div class="form-error" id="org_phone-error" tabindex="-1">
                        Contact phone number is required
                    </div>
                </div>
                <div class="form-element">
                    <label for="org_email">Contact Email<span>*</span></label>
                    <input type="text" id="org_email" autocomplete="off" aria-required="true" class="js-email">
                    <div class="form-error" id="org_email-error" tabindex="-1">
                        Contact email is required
                    </div>
                </div>
            </div>

            <fieldset>
                <div class="form-group" role="group" aria-labelledby="scuInOrg">
                    <div id="scuInOrg">
                        Are any SchoolsFirst FCU employees part of the organization?
                    </div>
                    <div class="options-group form-element third">
                        <div class="form-check-inline radio">
                            <input class="form-check-input" type="radio" name="scu_employee" id="scu_employee_yes" value="yes">
                            <label class="form-check-label" for="scu_employee_yes">Yes</label>
                        </div>
                        <div class="form-check-inline radio">
                            <input class="form-check-input" type="radio" name="scu_employee" id="scu_employee_no" value="no">
                            <label class="form-check-label" for="scu_employee_no">No</label>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset>
                <div class="form-group" role="group" aria-labelledby="prevSupport">
                    <div id="prevSupport" class="legend">
                        Has your organization received support from SchoolsFirst FCU in the past 12 months?<span>*</span>
                    </div>
                    <div class="options-group form-element third">
                        <div class="form-check-inline radio">
                            <input class="form-check-input" type="radio" name="support" id="support_yes" value="yes">
                            <label class="form-check-label" for="support_yes">Yes</label>
                        </div>
                        <div class="form-check-inline radio">
                            <input class="form-check-input" type="radio" name="support" id="support_no" value="no">
                            <label class="form-check-label" for="support_no">No</label>
                        </div>
                        <div class="form-error" id="support-error" tabindex="-1">
                            Please select employee status
                        </div>
                    </div>
                </div>
            </fieldset>

            <h3>Details of Request</h3>
            <hr>

            <div class="form-group">
                <div class="form-element">
                    <label for="typeofOrg">Type of Organization<span>*</span></label>
                    <select id="typeofOrg" aria-required="true" class="js-validate">
                        <option selected="" value="">Please Select</option>
                    </select>
                    <div class="form-error" id="state-error" tabindex="-1">
                        Type of organization is required
                    </div>
                </div>
                <div class="form-element">
                    <label for="typeofRequest">Type of Request<span>*</span></label>
                    <select id="typeofRequest" aria-required="true" class="js-validate">
                        <option selected="" value="">Please Select</option>
                    </select>
                    <div class="form-error" id="state-error" tabindex="-1">
                        Type of request is required
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="form-element">
                    <label for="requestedItems">What will the requested item be used for?<span>*</span></label>
                    <textarea name="requestedItems" autocomplete="off" aria-required="true" id="requestedItems" class="js-validate"></textarea>
                    <div class="form-error" id="requestedItems-error" tabindex="-1">
                        Requested items use is required
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="form-element">
                    <label for="requestAmount">Dollar amount being requested<span>*</span></label>
                    <input type="text" id="requestAmount" autocomplete="off" aria-required="true" class="js-validate">
                    <div class="form-error" id="requestAmount-error" tabindex="-1">
                        Dollar amount being requested is required
                    </div>
                </div>
                <div class="form-element">
                    <label for="scuRecognition">How will SchoolsFirst FCU be recognized?<span>*</span></label>
                    <input type="text" id="scuRecognition" autocomplete="off" aria-required="true" class="js-validate">
                    <div class="form-error" id="scuRecognition-error" tabindex="-1">
                        How SchoolsFirst FCU is recognized is required
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="form-element">
                    <label for="eventDate">Date of Event<span>*</span></label>
                    <input id="eventDate" autocomplete="off" aria-required="true" class="js-validate">
                    <div class="form-error" id="eventDate-error" tabindex="-1">
                        Date of event is required
                    </div>
                </div>
                <div class="form-element">
                    <label for="materialDate">Date You Need Donated Materials<span>*</span></label>
                    <input id="materialDate" autocomplete="off" aria-required="true" class="js-validate">
                    <div class="form-error" id="materialDate-error" tabindex="-1">
                        Date for donated materials is required
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="form-element">
                    <label class="file" for="file">ATTACH DOCUMENT<span class="paperclip"><img src="/images/paperclip.png" alt=""></span></label>
                    <input type="file" name="file" id="file" class="inputfile"/>
                </div>
            </div>

            <div class="form-action">
                <a href="#" class="reset form-cancel" aria-label="Clear form fields">Cancel</a>
                <div class="div"></div>
                <button type="button" class="btn btn-primary" id="donationRequest">
                    SUBMIT
                    <span class="oi oi-chevron-right" title="icon chevron-right" aria-hidden="true"></span>
                </button>
            </div>
        </form>

    </div>

    <script>
        $(function () {
            //Datepicker
            $('#materialDate').datepicker({uiLibrary: 'bootstrap4'});
            $('#eventDate').datepicker({uiLibrary: 'bootstrap4'});

            let org = $('#typeofOrg');
            let request = $('#typeofRequest');

            //Type of Organization
            $.ajax({
                url: "/json/organizations.json",
                success: function (orgs) {

                    $.each(orgs, function (idx, obj) {
                        let name = obj.name;
                        let id = obj.id;

                        org.append('<option value="' + id + '">' + name + '</option>');
                    });

                }
            });

            //Type of Request
            $.ajax({
                url: "/json/request.json",
                success: function (requests) {

                    $.each(requests, function (idx, obj) {
                        let name = obj.name;
                        let id = obj.id;

                        request.append('<option value="' + id + '">' + name + '</option>');
                    });

                }
            });

            $('#donationRequest').on('click', function (e) {
                let form = $(this).closest('form');

                var isValid = true;

                //Validate Fields
                $('.js-validate', form).each(function () {
                    if ($.trim($(this).val()) == '' && !$(this).parents('.form-group').hasClass('hidden')) {
                        var $thisId = $(this).attr('id');
                        isValid = false;

                        $(this).prev().addClass('has-error');
                        $(this).parents('.form-element').find('.form-error').show();
                        $(this).attr({
                            'aria-invalid': 'true',
                            'aria-describedby': $thisId + '-error'
                        });
                    } else {
                        $(this).prev().removeClass('has-error');
                        $(this).parents('.form-element').find('.form-error').hide();
                        $(this).attr({'aria-invalid': 'false', 'aria-describedby': ''});
                    }
                });

                //Validate Email Address
                var validEmail = true;
                var properEmail = true;
                var $emailError = $('#email-error-valid', form);
                var emailField = $('.js-email', form);
                $(emailField).filter(function (e) {
                    var emil = $('.js-email', form).val();
                    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                    if (!emailReg.test(emil)) {
                        validEmail = false;
                    } else {
                        validEmail = true;
                    }
                });

                if (validEmail == false || $('.js-email', form).val() == '') {
                    $(emailField).prev().addClass('has-error');
                    $(emailField).next().show();
                    $('#org_email').addClass('has-error').attr({'aria-invalid': 'true', 'aria-describedby': 'email-error'});
                    properEmail = false;
                } else {
                    $(emailField).prev().removeClass('has-error');
                    $(emailField).next().hide();
                    $('#org_email').removeClass('has-error').attr({'aria-invalid': 'false', 'aria-describedby': ''});
                    properEmail = true;
                }

                //Radio Buttons
                var radioCheck = true;
                if ($('input:radio[name="support"]').filter(':checked').length < 1) {
                    radioCheck = false;
                    $('#support-error').show();
                } else {
                    $('#support-error').hide();
                }

                //Submit the data OR jump to first error
                if (isValid == false || radioCheck == false || properEmail == false) {
                    $('.form [aria-invalid="true"]:first', form).focus();
                    e.preventDefault();
                } else {
                    //AJAX Submit
                    e.preventDefault();

                    var fd = new FormData();
                    fd.append( 'file', $('#file')[0].files[0]);

                    // Initiate Variables With Form Content
                    formData = {
                        contactName : $("#contact_name").val(),
                        contactOrg : $("#contact_org").val(),
                        purpose : $("#org_purpose").val(),
                        address : $('#org_address').val(),
                        state : $('#state').val(),
                        city : $('#city').val(),
                        zip : $('#zip').val(),
                        contactPhone : $('#org_phone').val(),
                        contactEmail : $('#org_email').val(),
                        scuInOrg : $("input[name='scu_employee']:checked").val(),
                        prevSupport : $("input[name='support']:checked").val(),
                        typeofOrg : $('#typeofOrg').val(),
                        typeofRequest : $('#typeofRequest').val(),
                        requestedItems : $('#requestedItems').val(),
                        requestAmount : $('#requestAmount').val(),
                        scuRecognition : $('#scuRecognition').val(),
                        eventDate : $('#eventDate').val(),
                        materialDate : $('#materialDate').val(),
                        file : fd
                    }

                    console.log(formData);

                    $.ajax({
                        url : "http://gateway-backbase.rho-dev.octfcu.org/direct-integration-service/v1/community-outreach/donation",
                        type : "POST",
                        data : formData,
                        contentType: false,
                        cache : false,
                        processData : false,
                        success: function(data) {
                            console.log(data);
                        }
                    });

                }

            });
        });
    </script>
</div>

            </div>
            <div class="col-12 col-lg-3">

            </div>
        </div>
    </div>
</section>


        <!-- Footer Scripts -->
        <!-- Cludo Search JS -->
<script type="text/javascript" src="https://customer.cludo.com/scripts/bundles/search-script.min.js"></script>
<script>
    var CludoSearch;
    (function () {
        var cludoSettings = {
            customerId: 10000888,
            engineId: 10001359,
            searchUrl: 'https://scu-website.herokuapp.com/pages/search.html',
            language: 'en',
            searchInputs: ['cludo-search-form'],
            template: 'InlineBasic',
            focusOnResultsAfterSearch: true,
            type: 'inline',
            richAutocomplete: true,
            enableRelatedSearches: false,
        };
        CludoSearch = new Cludo(cludoSettings);
        CludoSearch.init();
    })();
</script>
<!--[if lte IE 9]>
    <script src="https://api.cludo.com/scripts/xdomain.js" slave="https://api.cludo.com/proxy.html" type="text/javascript"></script>
<![endif]-->

    </body>
</html>
